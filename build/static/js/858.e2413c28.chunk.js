(self.webpackChunkreactapp=self.webpackChunkreactapp||[]).push([[858],{1309:function(e){e.exports={JOIN:"join",JOINED:"joined",DISCONNECTED:"disconnected",HTML_CHANGE:"html-change",CSS_CHANGE:"css-change",JAVASCRIPT_CHANHE:"javascript-change",HTML_SYNC:"html-sync",CSS_SYNC:"css-sync",JAVASCRIPT_SYNC:"javascript-sync",LEAVE:"leave"}},2259:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(4165),c=t(5861),o=t(9439),s=t(2791),a=t(5455),u=t(184),i=function(e){var n=e.username;return(0,u.jsxs)("div",{className:"client",children:[(0,u.jsx)(a.ZP,{name:n,size:50,round:"14px"}),(0,u.jsx)("span",{className:"userName",children:n})]})},l=t(3668),d=t.n(l),f=(t(5838),t(2574),t(9029),t(8045),t(3795),t(3265)),m=t(1309),p=t.n(m),h=function(e){var n=e.socketRef,t=e.roomId,a=e.onCodeChange,i=(0,s.useState)(!0),l=(0,o.Z)(i,2),m=l[0],h=l[1],C=(0,f.b)().htmlRef;return(0,s.useEffect)((function(){function e(){return(e=(0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.current=d().fromTextArea(document.getElementById("html"),{mode:{name:"xml",json:!0},theme:"dracula",autoCloseTags:!0,autoCloseBrackets:!0,lineNumbers:!0}),C.current.on("change",(function(e,r){var c=r.origin,o=e.getValue();a(o),"setValue"!==c&&n.current.emit(p().HTML_CHANGE,{roomId:t,code:o})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,s.useEffect)((function(){return n.current&&n.current.on(p().HTML_CHANGE,(function(e){var n=e.code;null!==n&&C.current.setValue(n)})),function(){n.current.off(p().HTML_CHANGE)}}),[n.current]),(0,u.jsxs)("div",{className:"editor-container ".concat(m?"":"collapsed"),children:[(0,u.jsxs)("div",{className:"editor-title",children:["HTML",(0,u.jsx)("button",{className:"edibtn",onClick:function(){return h(!m)},children:m?"Hide":"Show"})]}),(0,u.jsx)("textarea",{id:"html",className:"code-mirror-wrapper"})]})};t(5683);function C(e){var n=e.socketRef,t=e.roomId,a=e.onCodeChange,i=(0,f.b)().javascriptRef,l=(0,s.useState)(!1),m=(0,o.Z)(l,2),h=m[0],C=m[1];return(0,s.useEffect)((function(){function e(){return(e=(0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.current=d().fromTextArea(document.getElementById("javascript"),{mode:{name:"javascript",json:!0},theme:"dracula",autoCloseTags:!0,autoCloseBrackets:!0,lineNumbers:!0}),i.current.on("change",(function(e,r){var c=r.origin,o=e.getValue();a(o),"setValue"!==c&&n.current.emit(p().JAVASCRIPT_CHANHE,{roomId:t,code:o})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,s.useEffect)((function(){return n.current&&n.current.on(p().JAVASCRIPT_CHANHE,(function(e){var n=e.code;null!==n&&(console.log(n),i.current.setValue(n))})),function(){n.current.off(p().JAVASCRIPT_CHANHE)}}),[n.current]),(0,u.jsxs)("div",{className:"editor-container ".concat(h?"":"collapsed"),children:[(0,u.jsxs)("div",{className:"editor-title",children:["Java-Script",(0,u.jsx)("button",{className:"edibtn",onClick:function(){return C(!h)},children:h?"Hide":"Show"})]}),(0,u.jsx)("textarea",{id:"javascript",className:"code-mirror-wrapper"})]})}t(5144);function N(e){var n=e.socketRef,t=e.roomId,a=e.onCodeChange,i=(0,f.b)().cssRef,l=(0,s.useState)(!1),m=(0,o.Z)(l,2),h=m[0],C=m[1];return(0,s.useEffect)((function(){function e(){return(e=(0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.current=d().fromTextArea(document.getElementById("css"),{mode:{name:"css",json:!0},theme:"dracula",autoCloseTags:!0,autoCloseBrackets:!0,lineNumbers:!0}),i.current.on("change",(function(e,r){var c=r.origin,o=e.getValue();a(o),"setValue"!==c&&n.current.emit(p().CSS_CHANGE,{roomId:t,code:o})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,s.useEffect)((function(){return n.current&&n.current.on(p().CSS_CHANGE,(function(e){var n=e.code;null!==n&&(console.log(n),i.current.setValue(n))})),function(){n.current.off(p().CSS_CHANGE)}}),[n.current]),(0,u.jsxs)("div",{className:"editor-container ".concat(h?"":"collapsed"),children:[(0,u.jsxs)("div",{className:"editor-title",children:["CSS",(0,u.jsx)("button",{className:"edibtn",onClick:function(){return C(!h)},children:h?"Hide":"Show"})]}),(0,u.jsx)("textarea",{id:"css",className:"code-mirror-wrapper"})]})}var v=t(1006),x=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={"force new connection":!0,reconnectionAttempt:"Infinity",timeout:1e4,transports:["websocket"]},e.abrupt("return",(0,v.io)("http://localhost:3001",n));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=t(7689),g=t(2464),S=function(){var e=(0,j.TH)(),n=(0,s.useState)(""),t=(0,o.Z)(n,2),a=t[0],l=t[1],d=(0,s.useState)(""),m=(0,o.Z)(d,2),v=m[0],S=m[1],I=(0,s.useState)(""),E=(0,o.Z)(I,2),Z=E[0],k=E[1],A=(0,s.useState)(""),b=(0,o.Z)(A,2),H=b[0],R=b[1],w=(0,s.useRef)(null),T=(0,s.useRef)(null),y=(0,s.useRef)(null),_=(0,s.useRef)(null),V=(0,j.s0)(),J=(0,f.b)(),P=J.htmlRef,D=J.cssRef,O=J.javascriptRef,G=(0,s.useState)([]),L=(0,o.Z)(G,2),B=L[0],M=L[1],Y=(0,j.UO)().roomId;return(0,s.useEffect)((function(){var n=function(){var n=(0,c.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x();case 2:_.current=n.sent,_.current.on("connect_error",(function(e){g.ZP.error("Server Not Connected"),console.log(e),V("/")})),_.current.on("connect_failed",(function(e){g.ZP.error("Server Not Connected"),console.log(e),V("/")})),_.current.emit(p().JOIN,{roomId:Y,userName:null===(t=e.state)||void 0===t?void 0:t.userName}),_.current.on(p().JOINED,(function(n){var t,r=n.clients,c=n.userName;n.socketId;c!==(null===(t=e.state)||void 0===t?void 0:t.userName)&&g.ZP.success("".concat(c,", Just Get in the Room")),M(r),_.current.emit(p().HTML_SYNC,{code:w.current,roomId:Y}),_.current.emit(p().CSS_SYNC,{code:T.current,roomId:Y}),_.current.emit(p().JAVASCRIPT_SYNC,{code:y.current,roomId:Y})})),_.current.on(p().DISCONNECTED,(function(e){var n=e.socketId,t=e.userName;g.ZP.error("".concat(t,", Just Got Out from the Room")),M((function(e){return e.filter((function(e){return e.socketId!==n}))}))}));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),function(){_.current.disconnect(),_.current.off(p().JOINED),_.current.off(p().DISCONNECTED)}}),[]),(0,s.useEffect)((function(){(P.current||D.current||O.current)&&(P.current.on("change",(function(e,n){l(e.getValue())})),D.current.on("change",(function(e,n){S(e.getValue())})),O.current.on("change",(function(e,n){k(e.getValue())})),R("\n            <html>\n            <style>\n            body{\n                background-color:white;\n            }\n            ".concat(v,"\n            </style>\n            <body>\n            ").concat(a,"\n            </body>\n            <script>\n            ").concat(Z,"\n            <\/script>\n            </html>")))}),[P.current,D.current,O.current,a,v,Z]),e.state||V("/"),(0,u.jsxs)("div",{className:"mainWrap",children:[(0,u.jsxs)("div",{className:"aside",children:[(0,u.jsxs)("div",{className:"asideInner",children:[(0,u.jsx)("div",{className:"logo",children:(0,u.jsx)("img",{className:"logoImage",src:"/logo.png"})}),(0,u.jsx)("h3",{children:"Connected"}),(0,u.jsx)("div",{className:"clientList",children:B.map((function(e){return(0,u.jsx)(i,{username:e.userName},e.socketId)}))})]}),(0,u.jsx)("button",{className:"btn copyBtn",onClick:(0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(Y);case 3:g.ZP.success("Room-ID: copied"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),g.ZP.error("Error Ocured");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),children:"Copy Room-ID:"}),(0,u.jsx)("button",{className:"btn leaveBtn",onClick:function(){V("/")},children:"Leave Room"})]}),(0,u.jsxs)("div",{className:"editorWrap",children:[(0,u.jsxs)("div",{className:"pane top-pane",children:[(0,u.jsx)(h,{socketRef:_,roomId:Y,onCodeChange:function(e){w.current=e}}),(0,u.jsx)(N,{socketRef:_,roomId:Y,onCodeChange:function(e){T.current=e}}),(0,u.jsx)(C,{socketRef:_,roomId:Y,onCodeChange:function(e){y.current=e}})]}),(0,u.jsx)("div",{className:"pane",children:(0,u.jsx)("iframe",{srcDoc:H,title:"output",sandbox:"allow-scripts",frameBorder:"0",width:"100%",height:"100%"})})]})]})}}}]);
//# sourceMappingURL=858.e2413c28.chunk.js.map